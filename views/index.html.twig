{% extends "layout_expanded.html.twig" %}

{% block header %}
    {{ parent() }}
    <a href="add" class="btn primary float-right">Add new issue</a>
{% endblock %}

{% block content %}
    <table id="issuesList" class="bordered-table zebra-striped">
        <thead>
            <tr>
                <th>#</th>
                <th>Ticket</th>
                <th>Créé par</th>

                <th>Milestone</th>

                <th>En charge</th>
            </tr>
        </thead>
        <tbody>
        {% for issue in issues %}
            <tr data-controls-modal="modal_{{ issue.number }}" data-backdrop="static" style="cursor: pointer;">
                <td>#{{ issue.number }}</td>
                <td>
                    {{ issue.title }}
                </td>
                <td>{{ issue.user.login }}</td>

                <td>{% if issue.milestone.title is defined %}{{ issue.milestone.title }}{% else %}~{% endif %}</td>

                <td>{% if issue.assignee != null %}{{ issue.assignee.login }}{% else %}~~{% endif %}</td>
            </tr>
            <div id="modal_{{ issue.number }}" class="modal hide fade">
                <div class="modal-header">
                  <a href="#" class="close">×</a>
                  <h3>{{ issue.title }}</h3>
                </div>
                <div class="modal-body">
                  <p>{{ issue.body }}</p>
                </div>
                <div class="modal-footer">
                  <small>Appuyer sur Echap pour fermer</small>
                </div>
            </div>
        {% else %}
            <tr>
                <td colspan="5">
                    <h2>No issues here</h2>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% endblock %}

{% block javascripts %}
    <script src="http://autobahn.tablesorter.com/jquery.tablesorter.js"></script>
    <script>
        $(document).ready(function(){
            $("table#issuesList").tablesorter();
            $('.dropdown-toggle').dropdown();
            $('.modal').modal({
                keyboard: true,
                backdrop: true,
            });
        });
    </script>
{% endblock %}